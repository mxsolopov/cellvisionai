# Приложение для сегментации фотографий культур ММСК

Веб-приложение предназначено для автоматизации процесса семантической сегментации изображений клеточных культур с использованием популярных нейросетевых моделей. Оно позволяет исследователям и специалистам в области биологии и медицины эффективно анализировать микроскопические фотографии и определять, например, уровень конфлуэнтности клеточной культуры.

## Содержание

- [Введение](#введение)
- [Функциональные возможности](#функциональные-возможности)
- [Установка](#установка)
- [Использование](#использование)

## Введение

Этот репозиторий содержит исходный код приложения для семантической сегментации клеточных культур ММСК использованием нейросетевых моделей. Для обучения моделей использовался датасет микрофотографий 5 различных популяций ММСК человека. Фотографии были получены с использованием микроскопа Nikon Eclipse Ti 2 (объектив 10x). 320 изображений размером 1000x1000 пикселей были аннотированы экспертами для создания эталонного набора клеточных масок. Для аннотирования использовался сервис VGG Image Annotator. В приложении представлены три архитектуры для сегментации изображений: DeepLab, SegNet и U-Net. Все модели были инициализированы c весовыми коэффициентами, полученными после обучения на датасете ImageNet, а затем дообучены на датасете микрофотографий ММСК. 256 изображений были использованы для тренировочной выборки, 64 – для валидационной. Обучение проводили на протяжении 85 эпох, c использованием бинарной кросс-энтропии в качестве функции потерь и оптимизатора Adam.

## Функциональные возможности

- **Загрузка изображений**: Пользователи могут загружать пакеты фотографий клеточных культур в различных форматах.
- **Автоматическая сегментация: Приложение использует предобученные модели нейронных сетей для точной сегментации клеток, что значительно ускоряет процесс анализа.
- **Интерактивный интерфейс**: Удобный и интуитивно понятный интерфейс позволяет пользователям настраивать параметры сегментации и визуализировать результаты в реальном времени.
- **Расчёт конфлуэнтности**: Отоброжение данных о конфлуэнтности для просматриваемого изображения и для всего пакета изображений. 
- **Экспорт данных**: Результаты сегментации могут быть экспортированы в форматы PNG и JSON для дальнейшего анализа и обработки.

## Установка

### Предварительные требования

- Node.js v18.12.1
- npm v8.19.2
- Python 3.12.0 c установленными пакетами tensorflow 2.16.1 и flask 3.0.3

### Клонирование репозитория

- Выполните команду:
```bash
    git clone https://github.com/mxsolopov/cellvisionai.git
    cd cellvisionai
```

### Настройка фронтенда

Выполните команду:
```bash
    npm install
```

### Настройка сервера Flask

- В папке server нужно создать папку weights, куда необходимо поместить файлы обученных весовых коэффициентов: deep_lab_weights.h5, segnet_weights.h5 и unet_weights.h5.

- Выполните команду:
```bash
    cd server
    python app.py
```

## Использование

### Работа в режиме разработки

- В файле `src/App.jsx` укажите адрес Flask-сервера для разработки:
```js
    const URL = "http://localhost:5000/"
```

- В корневой директории запустите фронтенд в режиме разработки:
```bash
    npm run dev
```

### Сборка десктопного приложения

Перед сброкой в файле `src/App.jsx` укажите адрес Flask-сервера для продакшн.

- Выполните сборку фронтенда:
```bash
    npm run build
```

- В директории `dist` будут находится скомпилированные файлы приложения.